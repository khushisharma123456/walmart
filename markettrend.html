<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Market Trend Analysis â€“ Warehouse Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --walmart-blue: #0071ce;
            --walmart-dark-blue: #004f9a;
            --walmart-yellow: #ffc220;
            --sidebar-width: 280px;
            --header-height: 70px;
            --sidebar-dark: #1e293b;
            --sidebar-light: #f8fafc;
            --card-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            --transition: all 0.3s ease;
            --critical-red: #e74c3c;
            --warning-orange: #f39c12;
            --success-green: #2ecc71;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            display: flex;
            min-height: 100vh;
            background-color: #f1f5f9;
            color: #1e293b;
            overflow-x: hidden;
        }

        /* Sidebar Styles */
        .sidebar {
            width: var(--sidebar-width);
            background-color: var(--sidebar-dark);
            color: white;
            height: 100vh;
            position: fixed;
            transition: var(--transition);
            z-index: 100;
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            height: var(--header-height);
            display: flex;
            align-items: center;
            padding: 0 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            flex-shrink: 0;
        }

        .sidebar-header img {
            height: 30px;
            margin-right: 10px;
        }

        .sidebar-header h3 {
            font-size: 18px;
            font-weight: 600;
        }

        .sidebar-menu {
            padding: 20px 0;
            overflow-y: auto;
            flex-grow: 1;
            scrollbar-width: none;
        }

        .sidebar-menu::-webkit-scrollbar {
            display: none;
        }

        .menu-category {
            padding: 10px 20px;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #94a3b8;
            font-weight: 600;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: #cbd5e1;
            text-decoration: none;
            transition: var(--transition);
            font-size: 15px;
            font-weight: 500;
        }

        .menu-item:hover, .menu-item.active {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .menu-item i {
            margin-right: 12px;
            font-size: 18px;
            width: 24px;
            text-align: center;
        }

        .menu-item .badge {
            margin-left: auto;
            background-color: var(--walmart-yellow);
            color: #1e293b;
            font-size: 12px;
            font-weight: 600;
            padding: 2px 8px;
            border-radius: 20px;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            transition: var(--transition);
        }

        /* Header */
        .header {
            height: var(--header-height);
            background-color: white;
            box-shadow: var(--card-shadow);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 30px;
            position: sticky;
            top: 0;
            z-index: 90;
        }

        .header-left h2 {
            font-size: 20px;
            font-weight: 600;
            color: var(--walmart-blue);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .search-bar {
            position: relative;
        }

        .search-bar input {
            padding: 8px 15px 8px 35px;
            border-radius: 6px;
            border: 1px solid #e2e8f0;
            font-size: 14px;
            width: 200px;
            transition: var(--transition);
        }

        .search-bar input:focus {
            outline: none;
            border-color: var(--walmart-blue);
            width: 250px;
        }

        .search-bar i {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #94a3b8;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: var(--walmart-blue);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            cursor: pointer;
        }

        .notifications {
            position: relative;
            cursor: pointer;
        }

        .notifications i {
            font-size: 20px;
            color: #64748b;
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: #ef4444;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 600;
        }

        /* Dashboard Content */
        .dashboard-content {
            padding: 30px;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .dashboard-title h1 {
            font-size: 24px;
            font-weight: 600;
            color: #1e293b;
        }

        .dashboard-title p {
            color: #64748b;
            font-size: 14px;
        }

        .action-buttons .btn {
            padding: 8px 16px;
            font-size: 14px;
            font-weight: 500;
            border-radius: 6px;
            cursor: pointer;
            transition: var(--transition);
        }

        .btn-primary {
            background-color: var(--walmart-blue);
            color: white;
            border: none;
        }

        .btn-primary:hover {
            background-color: var(--walmart-dark-blue);
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--walmart-blue);
            color: var(--walmart-blue);
            margin-right: 10px;
        }

        .btn-outline:hover {
            background-color: rgba(0, 113, 206, 0.1);
        }

        /* Visualization Grid */
        .visualization-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .visual-card {
            background-color: white;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            padding: 20px;
            transition: var(--transition);
            border: 1px solid #e2e8f0;
            position: relative;
            overflow: hidden;
        }

        .visual-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }

        .visual-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--walmart-blue), var(--walmart-dark-blue));
        }

        .visual-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .visual-card-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--walmart-dark-blue);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .visual-card-content {
            height: 300px;
            position: relative;
        }

        /* Chart hover effects */
        .chart-hover {
            transition: all 0.3s ease;
        }

        .chart-hover:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(0, 113, 206, 0.2);
        }

        /* Status indicators */
        .status-indicator {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-up {
            background-color: #dcfce7;
            color: #166534;
        }

        .status-down {
            background-color: #fee2e2;
            color: #b91c1c;
        }

        /* Table Panel */
        .panel {
            background-color: white;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            padding: 20px;
            transition: var(--transition);
            border: 1px solid #e2e8f0;
            margin-bottom: 30px;
        }

        .panel:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }

        .panel-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--walmart-dark-blue);
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .forecast-card {
            background: linear-gradient(135deg, rgba(0, 113, 206, 0.1), rgba(0, 81, 154, 0.1));
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
        }

        .forecast-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .forecast-title {
            font-weight: 600;
            color: var(--walmart-dark-blue);
        }

        .forecast-value {
            font-size: 18px;
            font-weight: 700;
        }

        .forecast-change {
            font-size: 13px;
            display: flex;
            align-items: center;
        }

        .forecast-change.positive {
            color: #10b981;
        }

        .forecast-change.negative {
            color: #ef4444;
        }

        /* Filter dropdown styles */
        .filter-select {
            padding: 8px 12px;
            border-radius: 6px;
            border: 1px solid #cbd5e1;
            background-color: white;
            font-size: 14px;
            min-width: 140px;
            cursor: pointer;
            transition: var(--transition);
        }

        .filter-select:hover {
            border-color: var(--walmart-blue);
        }

        .filter-select:focus {
            outline: none;
            box-shadow: 0 0 0 2px rgba(0, 113, 206, 0.2);
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .visualization-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            .main-content {
                margin-left: 0;
            }
            .sidebar.active {
                transform: translateX(0);
            }
            
            .dashboard-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .action-buttons {
                width: 100%;
                display: flex;
                flex-direction: column;
                gap: 10px;
            }
            
            .btn-outline, .btn-primary {
                width: 100%;
                text-align: center;
            }
            
            .visual-card-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .filter-select {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/14/Walmart_Spark.svg/1200px-Walmart_Spark.svg.png" alt="Walmart Logo">
            <h3>Warehouse Portal</h3>
        </div>
        <div class="sidebar-menu">
            <div class="menu-category">Main</div>
            <a href="med.html" class="menu-item">
                <i class="fas fa-tachometer-alt"></i>
                Dashboard
            </a>
            <a href="mediator_inventory levels.html" class="menu-item">
                <i class="fas fa-boxes"></i>
                Inventory
            </a>
            <a href="mediator_store coordination.html" class="menu-item">
                <i class="fas fa-chart-line"></i>
                Store Coordination
            </a>
            <a href="mediator_supply_coordination.html" class="menu-item">
                <i class="fas fa-truck"></i>
                Supply Coordination
                <span class="badge">3</span>
            </a>
            
            <div class="menu-category">Operations</div>
            <a href="distribution.html" class="menu-item">
                <i class="fas fa-map-marked-alt"></i>
                Distribution
            </a>
            <a href="#" class="menu-item">
                <i class="fas fa-calendar-alt"></i>
                Schedule
            </a>
            <a href="#" class="menu-item">
                <i class="fas fa-percentage"></i>
                Performance
            </a>
            
            <div class="menu-category">Alerts</div>
            <a href="notification.html" class="menu-item">
                <i class="fas fa-bell"></i>
                Notifications
                <span class="badge">5</span>
            </a>
            <a href="restock.html" class="menu-item">
                <i class="fas fa-exclamation-triangle"></i>
                Restock Alerts
            </a>
            
            <!-- Market & Reports Section -->
            <div class="menu-category">Market & Reports</div>
            <a href="markettrend.html" class="menu-item active">
                <i class="fas fa-chart-bar"></i>
                Market Trends
            </a>
            <a href="report.html" class="menu-item">
                <i class="fas fa-file-alt"></i>
                Report
            </a>
            
            <div class="menu-category">Settings</div>
            <a href="#" class="menu-item">
                <i class="fas fa-user-cog"></i>
                Account
            </a>
            <a href="#" class="menu-item">
                <i class="fas fa-cog"></i>
                Preferences
            </a>
            <a href="#" class="menu-item">
                <i class="fas fa-sign-out-alt"></i>
                Logout
            </a>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Header -->
        <div class="header">
            <div class="header-left">
                <h2>Market Trend Analysis</h2>
            </div>
            <div class="header-right">
                <div class="search-bar">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search market trends...">
                </div>
                <div class="notifications">
                    <i class="fas fa-bell"></i>
                    <div class="notification-badge">2</div>
                </div>
                <div class="user-menu">
                    <div class="user-avatar">SK</div>
                </div>
            </div>
        </div>

        <!-- Dashboard Content -->
        <div class="dashboard-content">
            <div class="dashboard-header">
                <div class="dashboard-title">
                    <h1>Market Trend Overview</h1>
                    <p>Analyze market performance and predict future trends for warehouse optimization</p>
                </div>
                <div class="action-buttons">
                    <select id="warehouseSelect" class="btn btn-outline" style="padding:8px 16px;font-size:14px;">
                        <option value="Mumbai">Mumbai</option>
                        <option value="Delhi">Delhi</option>
                        <option value="Bangalore">Bangalore</option>
                        <option value="Chennai">Chennai</option>
                    </select>
                    <button class="btn btn-primary">
                        <i class="fas fa-download"></i> Export Report
                    </button>
                </div>
            </div>

            <!-- Visualization Grid -->
            <div class="visualization-grid">
                <!-- Line Chart - Sales Trend -->
                <div class="visual-card">
                    <div class="visual-card-header">
                        <div class="visual-card-title"><i class="fas fa-chart-line"></i> Monthly Sales Trend</div>
                        <select class="filter-select" id="timePeriod">
                            <option value="6">Last 6 Months</option>
                            <option value="12" selected>Last 12 Months</option>
                            <option value="ytd">Year-to-Date</option>
                        </select>
                    </div>
                    <div class="visual-card-content"><canvas id="lineChart" class="chart-hover"></canvas></div>
                </div>

                <!-- Bar Chart - Category Volume -->
                <div class="visual-card">
                    <div class="visual-card-header">
                        <div class="visual-card-title"><i class="fas fa-chart-bar"></i> Category Volume</div>
                        <select class="filter-select" id="categoryFilter">
                            <option value="all" selected>All Categories</option>
                            <option value="pharma">Pharmaceuticals</option>
                            <option value="devices">Medical Devices</option>
                            <option value="consumables">Consumables</option>
                        </select>
                    </div>
                    <div class="visual-card-content"><canvas id="barChart" class="chart-hover"></canvas></div>
                </div>

                <!-- Doughnut Chart - Market Share -->
                <div class="visual-card">
                    <div class="visual-card-header">
                        <div class="visual-card-title"><i class="fas fa-chart-pie"></i> Category Market Share</div>
                        <div class="status-indicator status-up">+5.2% YoY</div>
                    </div>
                    <div class="visual-card-content"><canvas id="pieChart" class="chart-hover"></canvas></div>
                </div>

                <!-- Radar Chart - Performance Metrics -->
                <div class="visual-card">
                    <div class="visual-card-header">
                        <div class="visual-card-title"><i class="fas fa-bullseye"></i> Performance Metrics</div>
                        <div class="status-indicator status-up">Optimized</div>
                    </div>
                    <div class="visual-card-content"><canvas id="radarChart" class="chart-hover"></canvas></div>
                </div>
            </div>

            <!-- Additional Panels -->
            <div class="visualization-grid">
                <!-- Forecast Panel -->
                <div class="visual-card">
                    <div class="visual-card-header">
                        <div class="visual-card-title"><i class="fas fa-crystal-ball"></i> Demand Forecast</div>
                        <select class="filter-select" id="forecastPeriod">
                            <option value="30">30 Days</option>
                            <option value="90" selected>90 Days</option>
                            <option value="180">180 Days</option>
                        </select>
                    </div>
                    <div class="visual-card-content">
                        <div class="forecast-card">
                            <div class="forecast-header">
                                <div class="forecast-title">Pharmaceuticals</div>
                                <div class="forecast-change positive"><i class="fas fa-arrow-up"></i> <span id="pharma-change">+12%</span></div>
                            </div>
                            <div class="forecast-value"><span id="pharma-value">â‚¹3.8â€¯Cr</span></div>
                        </div>
                        
                        <div class="forecast-card">
                            <div class="forecast-header">
                                <div class="forecast-title">Medical Devices</div>
                                <div class="forecast-change positive"><i class="fas fa-arrow-up"></i> <span id="devices-change">+8%</span></div>
                            </div>
                            <div class="forecast-value"><span id="devices-value">â‚¹2.2â€¯Cr</span></div>
                        </div>
                        
                        <div class="forecast-card">
                            <div class="forecast-header">
                                <div class="forecast-title">Consumables</div>
                                <div class="forecast-change negative"><i class="fas fa-arrow-down"></i> <span id="consumables-change">-3%</span></div>
                            </div>
                            <div class="forecast-value"><span id="consumables-value">â‚¹1.5â€¯Cr</span></div>
                        </div>
                    </div>
                </div>
                
                <!-- Competitor Analysis -->
                <div class="visual-card">
                    <div class="visual-card-header">
                        <div class="visual-card-title"><i class="fas fa-chess-board"></i> Competitor Analysis</div>
                        <div class="status-indicator status-up">Leading</div>
                    </div>
                    <div class="visual-card-content"><canvas id="competitorChart" class="chart-hover"></canvas></div>
                </div>
            </div>

            <!-- Detailed Table Panel -->
            <div class="panel">
                <div class="panel-title"><i class="fas fa-table"></i> Key Market Metrics (<span id="tableWarehouse">Mumbai</span>)</div>
                <div style="overflow-x:auto;">
                    <table style="width:100%;border-collapse:collapse;margin-top:15px;">
                        <thead>
                            <tr style="background-color:#f1f5f9;">
                                <th style="padding:12px;text-align:left;">Category</th>
                                <th style="padding:12px;text-align:left;">Current Sales</th>
                                <th style="padding:12px;text-align:left;">QoQ Growth</th>
                                <th style="padding:12px;text-align:left;">Market Share</th>
                                <th style="padding:12px;text-align:left;">Inventory Level</th>
                                <th style="padding:12px;text-align:left;">Status</th>
                            </tr>
                        </thead>
                        <tbody id="trendTableBody">
                            <!-- Table data will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- JS Section -->
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        /* === Data for each warehouse === */
        const dataMap = {
            'Mumbai': {
                lineData: {
                    '6': [220, 240, 260, 280, 300, 320],
                    '12': [120, 140, 160, 180, 200, 220, 240, 260, 280, 300, 320, 340],
                    'ytd': [120, 140, 160, 180, 200, 220]
                },
                barData: {
                    'all': {
                        current: [50, 70, 90, 60, 45],
                        previous: [45, 65, 85, 55, 40]
                    },
                    'pharma': {
                        current: [50],
                        previous: [45]
                    },
                    'devices': {
                        current: [70],
                        previous: [65]
                    },
                    'consumables': {
                        current: [90],
                        previous: [85]
                    }
                },
                pie: [40, 30, 20, 10],
                radar: [80, 85, 75, 90, 70, 95],
                competitor: [85, 75, 65, 80, 70],
                forecast: {
                    '30': {
                        pharma: { value: 'â‚¹1.2 Cr', change: '+5%' },
                        devices: { value: 'â‚¹0.9 Cr', change: '+4%' },
                        consumables: { value: 'â‚¹0.6 Cr', change: '-1%' }
                    },
                    '90': {
                        pharma: { value: 'â‚¹3.8 Cr', change: '+12%' },
                        devices: { value: 'â‚¹2.2 Cr', change: '+8%' },
                        consumables: { value: 'â‚¹1.5 Cr', change: '-3%' }
                    },
                    '180': {
                        pharma: { value: 'â‚¹7.5 Cr', change: '+15%' },
                        devices: { value: 'â‚¹4.3 Cr', change: '+10%' },
                        consumables: { value: 'â‚¹2.8 Cr', change: '+2%' }
                    }
                },
                table: [
                    {cat:'Pharmaceuticals', sales:'â‚¹2.4â€¯Cr', growth:'+8%', share:'38%', inventory:'Optimal', up:true},
                    {cat:'Medical Devices', sales:'â‚¹1.8â€¯Cr', growth:'+12%', share:'28%', inventory:'High', up:true},
                    {cat:'Consumables', sales:'â‚¹1.1â€¯Cr', growth:'+5%', share:'17%', inventory:'Medium', up:true},
                    {cat:'Diagnostic Kits', sales:'â‚¹0.9â€¯Cr', growth:'-2%', share:'14%', inventory:'Low', up:false},
                    {cat:'Surgical', sales:'â‚¹0.6â€¯Cr', growth:'+3%', share:'9%', inventory:'Optimal', up:true}
                ]
            },
            'Delhi': {
                lineData: {
                    '6': [185, 200, 220, 240, 260, 290],
                    '12': [100, 120, 140, 150, 160, 170, 185, 200, 220, 240, 260, 290],
                    'ytd': [100, 120, 140, 150, 160, 170]
                },
                barData: {
                    'all': {
                        current: [45, 65, 85, 55, 40],
                        previous: [40, 60, 80, 50, 35]
                    },
                    'pharma': {
                        current: [45],
                        previous: [40]
                    },
                    'devices': {
                        current: [65],
                        previous: [60]
                    },
                    'consumables': {
                        current: [85],
                        previous: [80]
                    }
                },
                pie: [35, 35, 18, 12],
                radar: [78, 80, 70, 88, 68, 90],
                competitor: [80, 70, 75, 85, 65],
                forecast: {
                    '30': {
                        pharma: { value: 'â‚¹1.1 Cr', change: '+6%' },
                        devices: { value: 'â‚¹0.8 Cr', change: '+5%' },
                        consumables: { value: 'â‚¹0.5 Cr', change: '-2%' }
                    },
                    '90': {
                        pharma: { value: 'â‚¹3.2 Cr', change: '+10%' },
                        devices: { value: 'â‚¹1.9 Cr', change: '+7%' },
                        consumables: { value: 'â‚¹1.2 Cr', change: '-1%' }
                    },
                    '180': {
                        pharma: { value: 'â‚¹6.5 Cr', change: '+13%' },
                        devices: { value: 'â‚¹3.8 Cr', change: '+9%' },
                        consumables: { value: 'â‚¹2.4 Cr', change: '+3%' }
                    }
                },
                table: [
                    {cat:'Pharmaceuticals', sales:'â‚¹1.9â€¯Cr', growth:'+6%', share:'35%', inventory:'High', up:true},
                    {cat:'Medical Devices', sales:'â‚¹1.7â€¯Cr', growth:'+10%', share:'31%', inventory:'Optimal', up:true},
                    {cat:'Consumables', sales:'â‚¹1.0â€¯Cr', growth:'-1%', share:'18%', inventory:'Low', up:false},
                    {cat:'Diagnostic Kits', sales:'â‚¹0.7â€¯Cr', growth:'-4%', share:'13%', inventory:'Low', up:false},
                    {cat:'Surgical', sales:'â‚¹0.5â€¯Cr', growth:'+2%', share:'9%', inventory:'Medium', up:true}
                ]
            },
            'Bangalore': {
                lineData: {
                    '6': [200, 225, 250, 275, 300, 330],
                    '12': [90, 110, 130, 145, 160, 180, 200, 225, 250, 275, 300, 330],
                    'ytd': [90, 110, 130, 145, 160, 180]
                },
                barData: {
                    'all': {
                        current: [55, 75, 95, 65, 50],
                        previous: [50, 70, 90, 60, 45]
                    },
                    'pharma': {
                        current: [55],
                        previous: [50]
                    },
                    'devices': {
                        current: [75],
                        previous: [70]
                    },
                    'consumables': {
                        current: [95],
                        previous: [90]
                    }
                },
                pie: [42, 28, 18, 12],
                radar: [85, 82, 78, 90, 75, 92],
                competitor: [88, 78, 70, 82, 75],
                forecast: {
                    '30': {
                        pharma: { value: 'â‚¹1.4 Cr', change: '+8%' },
                        devices: { value: 'â‚¹0.9 Cr', change: '+6%' },
                        consumables: { value: 'â‚¹0.7 Cr', change: '+1%' }
                    },
                    '90': {
                        pharma: { value: 'â‚¹4.2 Cr', change: '+12%' },
                        devices: { value: 'â‚¹2.5 Cr', change: '+9%' },
                        consumables: { value: 'â‚¹1.8 Cr', change: '+4%' }
                    },
                    '180': {
                        pharma: { value: 'â‚¹8.3 Cr', change: '+16%' },
                        devices: { value: 'â‚¹4.8 Cr', change: '+12%' },
                        consumables: { value: 'â‚¹3.2 Cr', change: '+7%' }
                    }
                },
                table: [
                    {cat:'Pharmaceuticals', sales:'â‚¹2.1â€¯Cr', growth:'+9%', share:'36%', inventory:'Medium', up:true},
                    {cat:'Medical Devices', sales:'â‚¹1.6â€¯Cr', growth:'+11%', share:'28%', inventory:'High', up:true},
                    {cat:'Consumables', sales:'â‚¹1.2â€¯Cr', growth:'+4%', share:'21%', inventory:'Optimal', up:true},
                    {cat:'Diagnostic Kits', sales:'â‚¹0.6â€¯Cr', growth:'-1%', share:'10%', inventory:'Low', up:false},
                    {cat:'Surgical', sales:'â‚¹0.5â€¯Cr', growth:'+3%', share:'9%', inventory:'Medium', up:true}
                ]
            },
            'Chennai': {
                lineData: {
                    '6': [175, 190, 210, 230, 250, 280],
                    '12': [80, 95, 110, 130, 145, 160, 175, 190, 210, 230, 250, 280],
                    'ytd': [80, 95, 110, 130, 145, 160]
                },
                barData: {
                    'all': {
                        current: [40, 60, 80, 50, 35],
                        previous: [35, 55, 75, 45, 30]
                    },
                    'pharma': {
                        current: [40],
                        previous: [35]
                    },
                    'devices': {
                        current: [60],
                        previous: [55]
                    },
                    'consumables': {
                        current: [80],
                        previous: [75]
                    }
                },
                pie: [38, 32, 20, 10],
                radar: [75, 78, 72, 85, 70, 88],
                competitor: [82, 72, 68, 78, 70],
                forecast: {
                    '30': {
                        pharma: { value: 'â‚¹0.9 Cr', change: '+5%' },
                        devices: { value: 'â‚¹0.7 Cr', change: '+4%' },
                        consumables: { value: 'â‚¹0.4 Cr', change: '-1%' }
                    },
                    '90': {
                        pharma: { value: 'â‚¹2.8 Cr', change: '+9%' },
                        devices: { value: 'â‚¹1.7 Cr', change: '+7%' },
                        consumables: { value: 'â‚¹1.1 Cr', change: '+2%' }
                    },
                    '180': {
                        pharma: { value: 'â‚¹5.5 Cr', change: '+12%' },
                        devices: { value: 'â‚¹3.4 Cr', change: '+10%' },
                        consumables: { value: 'â‚¹2.2 Cr', change: '+5%' }
                    }
                },
                table: [
                    {cat:'Pharmaceuticals', sales:'â‚¹1.7â€¯Cr', growth:'+7%', share:'37%', inventory:'High', up:true},
                    {cat:'Medical Devices', sales:'â‚¹1.4â€¯Cr', growth:'+8%', share:'30%', inventory:'Medium', up:true},
                    {cat:'Consumables', sales:'â‚¹0.9â€¯Cr', growth:'+2%', share:'19%', inventory:'Low', up:true},
                    {cat:'Diagnostic Kits', sales:'â‚¹0.5â€¯Cr', growth:'-3%', share:'11%', inventory:'Low', up:false},
                    {cat:'Surgical', sales:'â‚¹0.4â€¯Cr', growth:'+1%', share:'8%', inventory:'Optimal', up:true}
                ]
            }
        };

        /* === Labels === */
        const timePeriodLabels = {
            '6': ['Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
            '12': ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],
            'ytd': ['Jan','Feb','Mar','Apr','May','Jun']
        };
        
        const labelsBar  = ['Pharmaceuticals','Medical Devices','Consumables','Diagnostic Kits','Surgical'];
        const labelsRadar = ['Order Fulfilment','Processing Time','Cost Efficiency','Inventory Accuracy','Supplier Delivery','Staff Productivity'];
        const labelsCompetitor = ['Walmart', 'Competitor A', 'Competitor B', 'Competitor C', 'Market Avg'];

        /* === Chart initialisation === */
        const lineCtx  = document.getElementById('lineChart');
        const barCtx   = document.getElementById('barChart');
        const pieCtx   = document.getElementById('pieChart');
        const radarCtx = document.getElementById('radarChart');
        const competitorCtx = document.getElementById('competitorChart');

        const lineChart = new Chart(lineCtx, {
            type:'line',
            data:{
                labels: timePeriodLabels['12'],
                datasets:[
                    {
                        label:'Sales (â‚¹ Cr)',
                        data:[],
                        borderColor:'rgba(0,113,206,1)',
                        backgroundColor:'rgba(0,113,206,0.1)',
                        fill:true,
                        tension:0.4
                    }
                ]
            },
            options:{
                scales:{
                    y:{
                        beginAtZero:false,
                        title:{
                            display:true,
                            text:'Sales (â‚¹ Crores)'
                        }
                    }
                }
            }
        });

        const barChart = new Chart(barCtx, {
            type:'bar',
            data:{
                labels: labelsBar,
                datasets:[
                    {
                        label:'Current',
                        data:[],
                        backgroundColor:'rgba(0,113,206,0.7)',
                        borderColor:'rgba(0,81,154,1)',
                        borderWidth:1
                    },
                    {
                        label:'Previous',
                        data:[],
                        backgroundColor:'rgba(100,149,237,0.5)',
                        borderColor:'rgba(70,130,180,1)',
                        borderWidth:1
                    }
                ]
            },
            options:{
                scales:{
                    y:{
                        beginAtZero:true,
                        title:{
                            display:true,
                            text:'Volume (Units)'
                        }
                    }
                }
            }
        });

        const pieChart = new Chart(pieCtx, {
            type:'doughnut',
            data:{
                labels: labelsBar,
                datasets:[{
                    data:[],
                    backgroundColor:[
                        'rgba(0,113,206,0.7)',
                        'rgba(0,81,154,0.7)',
                        'rgba(65,105,225,0.7)',
                        'rgba(30,144,255,0.7)',
                        'rgba(100,149,237,0.7)'
                    ],
                    borderColor:'rgba(0,81,154,0.5)',
                    borderWidth:1
                }]
            },
            options:{
                cutout:'60%',
                plugins:{
                    legend:{
                        position:'right'
                    }
                }
            }
        });

        const radarChart = new Chart(radarCtx, {
            type:'radar',
            data:{
                labels: labelsRadar,
                datasets:[
                    {
                        label:'Current',
                        data:[],
                        fill:true,
                        backgroundColor:'rgba(0,113,206,0.2)',
                        borderColor:'rgba(0,113,206,1)',
                        pointBackgroundColor:'rgba(0,113,206,1)'
                    },
                    {
                        label:'Target',
                        data:[90, 85, 88, 95, 90, 92],
                        fill:true,
                        backgroundColor:'rgba(46,204,113,0.1)',
                        borderColor:'rgba(46,204,113,1)',
                        borderDash: [5, 5],
                        pointBackgroundColor:'rgba(46,204,113,1)'
                    }
                ]
            },
            options:{
                scales:{
                    r:{
                        suggestedMin:50,
                        suggestedMax:100
                    }
                }
            }
        });

        const competitorChart = new Chart(competitorCtx, {
            type:'bar',
            data:{
                labels: labelsCompetitor,
                datasets:[{
                    label:'Market Performance',
                    data:[],
                    backgroundColor:[
                        'rgba(0,113,206,0.9)',
                        'rgba(120,120,120,0.7)',
                        'rgba(120,120,120,0.7)',
                        'rgba(120,120,120,0.7)',
                        'rgba(220,220,220,0.7)'
                    ]
                }]
            },
            options:{
                scales:{
                    y:{
                        beginAtZero:true,
                        max:100,
                        title:{
                            display:true,
                            text:'Performance Index'
                        }
                    }
                }
            }
        });

        /* === Table rendering === */
        const tableBody = document.getElementById('trendTableBody');
        function renderTable(rows){
            tableBody.innerHTML = '';
            rows.forEach(r=>{
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td style="padding:12px;border-bottom:1px solid #e2e8f0;">${r.cat}</td>
                    <td style="padding:12px;border-bottom:1px solid #e2e8f0;">${r.sales}</td>
                    <td style="padding:12px;border-bottom:1px solid #e2e8f0;">${r.growth}</td>
                    <td style="padding:12px;border-bottom:1px solid #e2e8f0;">${r.share}</td>
                    <td style="padding:12px;border-bottom:1px solid #e2e8f0;">${r.inventory}</td>
                    <td style="padding:12px;border-bottom:1px solid #e2e8f0;">
                        <span class="status-indicator ${r.up? 'status-up':'status-down'}">${r.up? 'Growing':'Declining'}</span>
                    </td>`;
                tableBody.appendChild(tr);
            });
        }

        /* === Update forecast cards === */
        function updateForecast(warehouse, period) {
            const forecastData = dataMap[warehouse].forecast[period];
            
            document.getElementById('pharma-value').textContent = forecastData.pharma.value;
            document.getElementById('pharma-change').textContent = forecastData.pharma.change;
            document.getElementById('devices-value').textContent = forecastData.devices.value;
            document.getElementById('devices-change').textContent = forecastData.devices.change;
            document.getElementById('consumables-value').textContent = forecastData.consumables.value;
            document.getElementById('consumables-change').textContent = forecastData.consumables.change;
            
            // Update indicator classes based on change
            document.querySelector('#pharma-change').parentElement.className = 
                `forecast-change ${forecastData.pharma.change.includes('+') ? 'positive' : 'negative'}`;
                
            document.querySelector('#devices-change').parentElement.className = 
                `forecast-change ${forecastData.devices.change.includes('+') ? 'positive' : 'negative'}`;
                
            document.querySelector('#consumables-change').parentElement.className = 
                `forecast-change ${forecastData.consumables.change.includes('+') ? 'positive' : 'negative'}`;
        }

        /* === Core update function === */
        function updateDashboard() {
            // Get current selections
            const warehouse = document.getElementById('warehouseSelect').value;
            const timePeriod = document.getElementById('timePeriod').value;
            const categoryFilter = document.getElementById('categoryFilter').value;
            const forecastPeriod = document.getElementById('forecastPeriod').value;
            
            const data = dataMap[warehouse];
            
            // Update line chart
            lineChart.data.labels = timePeriodLabels[timePeriod];
            lineChart.data.datasets[0].data = data.lineData[timePeriod];
            
            // Update bar chart
            const barData = data.barData[categoryFilter];
            barChart.data.datasets[0].data = barData.current;
            barChart.data.datasets[1].data = barData.previous;
            
            if (categoryFilter === 'all') {
                barChart.data.labels = labelsBar;
            } else {
                // For single category, show only that category
                const categoryName = {
                    'pharma': 'Pharmaceuticals',
                    'devices': 'Medical Devices',
                    'consumables': 'Consumables'
                }[categoryFilter];
                barChart.data.labels = [categoryName];
            }
            
            // Update other charts
            pieChart.data.datasets[0].data = data.pie;
            radarChart.data.datasets[0].data = data.radar;
            competitorChart.data.datasets[0].data = data.competitor;
            
            // Update charts
            lineChart.update();
            barChart.update();
            pieChart.update();
            radarChart.update();
            competitorChart.update();
            
            // Update Table
            renderTable(data.table);
            document.getElementById('tableWarehouse').textContent = warehouse;
            
            // Update Forecast
            updateForecast(warehouse, forecastPeriod);
        }

        // Initial load
        updateDashboard();

        // Dropdown change handlers
        document.getElementById('warehouseSelect').addEventListener('change', updateDashboard);
        document.getElementById('timePeriod').addEventListener('change', updateDashboard);
        document.getElementById('categoryFilter').addEventListener('change', updateDashboard);
        document.getElementById('forecastPeriod').addEventListener('change', updateDashboard);
        
        // Export button functionality
        document.querySelector('.btn-primary').addEventListener('click', function() {
            alert('Report exported successfully!');
        });
        
        // Mobile sidebar toggle
        const sidebarToggle = document.createElement('div');
        sidebarToggle.innerHTML = '<i class="fas fa-bars"></i>';
        sidebarToggle.style.position = 'fixed';
        sidebarToggle.style.top = '20px';
        sidebarToggle.style.left = '20px';
        sidebarToggle.style.zIndex = '1000';
        sidebarToggle.style.background = 'var(--walmart-blue)';
        sidebarToggle.style.color = 'white';
        sidebarToggle.style.width = '40px';
        sidebarToggle.style.height = '40px';
        sidebarToggle.style.borderRadius = '50%';
        sidebarToggle.style.display = 'flex';
        sidebarToggle.style.alignItems = 'center';
        sidebarToggle.style.justifyContent = 'center';
        sidebarToggle.style.cursor = 'pointer';
        sidebarToggle.style.boxShadow = '0 2px 10px rgba(0,0,0,0.2)';
        sidebarToggle.addEventListener('click', function() {
            document.querySelector('.sidebar').classList.toggle('active');
        });
        document.body.appendChild(sidebarToggle);
    });
    </script>
</body>
</html>